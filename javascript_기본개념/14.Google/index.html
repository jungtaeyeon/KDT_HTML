<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>도서관리 시스템 - html활용코드</title>
</head>
<body>
  <button id="btnLogin">로그인</button>
  <button id="btnLogout">로그아웃</button>
  <script type="module">
    import { firebaseApp } from "../service/firebase.js";
    import { getAuth } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js"
    import AuthLogic from "../service/authLogic.js" // export에 default가 있기 떄문에 좌중괄호 우중괄호가 없어야 한다.
    import { loginGoogle, logOut } from "../service/authLogic.js"
    const auth = getAuth(firebaseApp);
    console.log(auth);
    // authLogic.js에서 구현한 클래스를 인스턴스화 하기
    const authLogic = new AuthLogic();
    // 객체생성이 되었으니까 전역변수를 호출할 수 있다.
    // console.log(authLogic.googleProvider);
    // console.log(authLogic["googleProvider"]);
    const btnLogin = document.querySelector("#btnLogin")
    btnLogin.addEventListener("click",async(event) => {
      console.log('로그인버튼');
      event.preventDefault();
      // authLogic의 loginGoogle함수 호출 결과로 돌려받은 값
      const result = await loginGoogle(auth, authLogic.googleProvider);
      console.log(result.uid);
      console.log(result.displayName);
      console.log(result.email); 
      // console.log(result["uid"]); // 위와 동일한 코드
      // console.log(result["displayName"]);
      // console.log(result["email"]);
    }) //////// end of login 끝

    const btnLogout = document.querySelector("#btnLogout")
    btnLogout.addEventListener("click", (event) => {
      logOut(auth); // 인증정보를 쥐고있다.
    })
  </script>
</body>
</html>